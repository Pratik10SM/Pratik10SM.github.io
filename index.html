<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Magic Number Trick by Pratik Patil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 0; }
    .container { max-width: 440px; margin: 40px auto; background: #fff; border-radius: 9px; box-shadow: 0 2px 8px #0002; padding: 32px 24px; }
    h1 { text-align: center; color: #1e88e5; }
    .btn { padding: 10px 20px; background: #1e88e5; color: #fff; border: none; border-radius: 4px; margin: 6px 4px; cursor: pointer; font-size: 16px; }
    .btn:disabled { background: #b0bec5; }
    .input-row { margin: 18px 0 10px; }
    input[type="number"] { font-size: 18px; padding: 7px 10px; width: 80%; border: 1px solid #ccc; border-radius: 4px;}
    .result, .instructions { margin: 18px 0; padding: 12px; background: #e3f2fd; border-radius: 4px; min-height: 40px; }
    .result.success { background: #d0ffdc; color: #389e59; }
    .result.fail { background: #ffd0d0; color: #c62828; }
    .fade { animation: fadeIn 0.7s; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .trick-btns { text-align: center; margin-bottom: 20px; }
    @media (max-width: 600px) { .container { padding: 12px 4px; } }
  </style>
</head>
<body>
  <div class="container">
    <h1>Magic Number Trick</h1>
    <div class="trick-btns">
      <button class="btn" id="startTrickBtn">Start Trick</button>
      <button class="btn" id="resetBtn" style="display:none;">Reset</button>
    </div>
    <div class="instructions" id="instructions">
      Click "Start Trick" to begin.<br><br>
      <strong>Instructions:</strong>
      <ul>
        <li>Your <b>first number</b> should be a <b>three-digit number</b> whose <b>first digit is not 0 or 1</b>.</li>
        <li>All <b>subsequent numbers</b> you enter should also be <b>three-digit numbers</b>.</li>
      </ul>
    </div>
    <div class="input-row" id="inputRow" style="display:none;">
      <input type="number" id="userInput" placeholder="Enter three-digit number" />
      <button class="btn" id="submitBtn">Submit</button>
    </div>
    <div class="result" id="result"></div>
  </div>
  <script>
    // State
    let step = 0;
    let trickNumbers = [];

    const startTrickBtn = document.getElementById('startTrickBtn');
    const resetBtn = document.getElementById('resetBtn');
    const instructions = document.getElementById('instructions');
    const inputRow = document.getElementById('inputRow');
    const userInput = document.getElementById('userInput');
    const submitBtn = document.getElementById('submitBtn');
    const result = document.getElementById('result');

    function showInstructions(text) {
      instructions.innerHTML = text;
      instructions.classList.add('fade');
      setTimeout(() => instructions.classList.remove('fade'), 650);
    }

    function showResult(text, status) {
      result.innerHTML = text;
      result.className = 'result fade' + (status ? ' success' : ' fail');
      setTimeout(() => result.classList.remove('fade'), 650);
    }

    function resetAll() {
      step = 0;
      trickNumbers = [];
      userInput.value = '';
      userInput.disabled = false;
      inputRow.style.display = 'none';
      submitBtn.disabled = false;
      showInstructions(
        'Click "Start Trick" to begin.<br><br>' +
        '<strong>Instructions:</strong>' +
        '<ul>' +
        '<li>Your <b>first number</b> should be a <b>three-digit number</b> whose <b>first digit is not 0 or 1</b>.</li>' +
        '<li>All <b>subsequent numbers</b> you enter should also be <b>three-digit numbers</b>.</li>' +
        '</ul>'
      );
      result.innerHTML = '';
      resetBtn.style.display = 'none';
      startTrickBtn.disabled = false;
    }

    // Magic Number Trick Logic (Corresponds to Trick 1)
    function startTrick() {
      step = 0;
      trickNumbers = [];
      showInstructions(
        'Enter your <b>first three-digit number</b> (first digit must not be 0 or 1):'
      );
      inputRow.style.display = 'block';
      result.innerHTML = '';
      userInput.value = '';
      resetBtn.style.display = '';
      startTrickBtn.disabled = true;
    }

    function handleTrickInput() {
      const val = parseInt(userInput.value, 10);
      // Validation
      if (isNaN(val) || val < 100 || val > 999) {
        alert('Please enter a valid three-digit number.');
        return;
      }
      const firstDigit = Math.floor(val / 100);
      // Step 1: User enters first number
      if (step === 0) {
        if (firstDigit === 0 || firstDigit === 1) {
          alert('The first digit must not be 0 or 1. Please enter a valid three-digit number.');
          return;
        }
        trickNumbers.push(val);
        const firstBotNum = 2571 - val;
        trickNumbers.push(firstBotNum);
        showInstructions(
          `Bot enters: ${firstBotNum}<br>Now, enter your <b>second three-digit number</b>:`
        );
        userInput.value = '';
        step++;
      }
      // Step 2: User enters second number
      else if (step === 1) {
        trickNumbers.push(val);
        const secondBotNum = 2571 - trickNumbers.reduce((a, b) => a + b, 0);
        trickNumbers.push(secondBotNum);
        showInstructions(
          `Bot enters: ${secondBotNum}<br>Now, enter your <b>third and final three-digit number</b>:`
        );
        userInput.value = '';
        step++;
      }
      // Step 3: User enters third number
      else if (step === 2) {
        trickNumbers.push(val);
        const sum = trickNumbers.reduce((a, b) => a + b, 0);
        showResult(
          `Numbers: ${trickNumbers.join(', ')}<br>Sum: ${sum}<br>Prediction: 2571<br>${sum === 2571 ? '✅ Magic!' : '❌ Try again!'}`,
          sum === 2571
        );
        showInstructions('Trick Complete!');
        inputRow.style.display = 'none';
      }
      userInput.value = '';
    }

    // Event Listeners
    startTrickBtn.onclick = startTrick;
    resetBtn.onclick = resetAll;
    submitBtn.onclick = handleTrickInput;
    userInput.addEventListener("keyup", function(event) {
      if (event.key === "Enter") submitBtn.click();
    });

    // Initial State
    resetAll();
  </script>
</body>
</html>
